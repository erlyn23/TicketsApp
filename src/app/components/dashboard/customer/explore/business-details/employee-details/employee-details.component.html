<ion-header>
    <ion-toolbar color="primary">
        <ion-buttons slot="start">
            <ion-button (click)="closeModal()">
                <ion-icon slot="start" name="arrow-back"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-title>{{data.fullName}}</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>
    <ion-segment swipeGesture (ionChange)="setSlide($event)" [(ngModel)]="employeeDetailPage" value="employeeInfo">
        <ion-segment-button value="employeeInfo">
            <ion-label>Información</ion-label>
        </ion-segment-button>
        <ion-segment-button value="employeeComments">
            <ion-label>Comentarios</ion-label>
        </ion-segment-button>
    </ion-segment>
    
    <ion-slides [options]="slideOpts" #slideCtrl (ionSlideDidChange)="setSegment($event)" pager="false">
        <ion-slide>
            <ion-grid>
                <ion-row>
                    <ion-col size="12">
                        <div class="clients-in-turn-content">
                            <h3>Especialidad</h3>
                            <h5>{{dbEmployee.employeeSpecialty}}</h5>
                        </div>
                    </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col size="12">
                        <div class="rating-content">
                            <h3>Calificación actual</h3>
                            <span [ngSwitch]="dbEmployee.rating">
                            <p *ngSwitchCase="1">
                                <i class="fas fa-star"></i>
                            </p>
                            <p *ngSwitchCase="2">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </p>
                            <p *ngSwitchCase="3">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </p>
                            <p *ngSwitchCase="4">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </p>
                            <p *ngSwitchCase="5">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </p>
                            <p *ngSwitchDefault>
                                <span style="color: lightgray; text-shadow: none; font-size: 20px;"><em>Este empleado aún no ha sido calificado</em></span>
                            </p>
                            </span>
                        </div>
                        <div class="rating-content">
                            <h3>Calificar</h3>
                            <div id="stars-content">
                                <i class="far fa-star" (click)="rateEmployee(1)"></i>
                                <i class="far fa-star" (click)="rateEmployee(2)"></i>
                                <i class="far fa-star" (click)="rateEmployee(3)"></i>
                                <i class="far fa-star" (click)="rateEmployee(4)"></i>
                                <i class="far fa-star" (click)="rateEmployee(5)"></i>
                            </div>
                        </div>
                        <div class="clients-in-turn-content">
                            <h3>Total de clientes en turno</h3>
                            <h5>{{dbEmployee.clientsInTurn}}</h5>
                        </div>
                        <div class="reserve-turn">
                            <h3>Reservar turno</h3>
                            <form>
                                <ion-item>
                                    <ion-label>Fecha de reserva</ion-label>
                                    <ion-datetime display-format="DD/MM/YYYY" 
                                    [(ngModel)]="reserveDate" name="reserveDate"
                                    doneText="Aceptar" 
                                    cancelText="Cancelar"></ion-datetime>
                                </ion-item>
                            </form>
                            <button class="auth-btn" (click)="reserveTurn(clientPhoto, dbEmployee.clientsInTurn)" *ngIf="!isInTurn">
                                Reservar
                            </button>
                            <button class="auth-btn cancel-btn" (click)="searchClientEmployeeTurn()" *ngIf="isInTurn">
                                Cancelar reserva anterior
                            </button>
                        </div>
                    </ion-col>
                </ion-row>
            </ion-grid>
        </ion-slide>
        
        <ion-slide>
            <div *ngIf="employeeDetailPage === 'employeeComments'" class="employee-comments-container">
                <div class="comment-inputs">
                    <form>
                        <ion-grid>
                            <ion-row>
                                <ion-col size="9">
                                    <textarea type="text" class="auth-input" [(ngModel)]="comment" name="comment" placeholder="Escribe un comentario"></textarea>
                                </ion-col>
                                <ion-col size="3">
                                    <button class="send-comment-btn" (click)="doComment()">
                                        <ion-icon slot="center" name="paper-plane-outline"></ion-icon>
                                    </button>
                                </ion-col>
                            </ion-row>
                        </ion-grid>
                    </form>
                </div>
                <div class="comments-content">
                    <ion-slides [options]="commentsOpts" #commentsSlide class="comments-slide">
                        <ion-slide *ngFor="let comment of employeeComments">
                            <div class="comments-card">
                                <ion-card-title>{{comment.user}}</ion-card-title>
                                <ion-card-content>
                                    <p>{{comment.comment}}</p>
                                    <p class="right"><small>{{comment.commentDate}}</small></p>
                                </ion-card-content>
                            </div>
                        </ion-slide>
                    </ion-slides>
                    <ion-fab horizontal="start" style="margin-top: -45px;">
                        <ion-fab-button side="end" (click)="upComment()">
                            <ion-icon name="arrow-up"></ion-icon>
                        </ion-fab-button>
                        <ion-fab-button side="start" (click)="downComment()">
                            <ion-icon name="arrow-down"></ion-icon>
                        </ion-fab-button>
                    </ion-fab>
                </div>
            </div>
        </ion-slide>
    </ion-slides>
</ion-content>